'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index = require('../../index-134e9852.js');
var Channel_utils_compareMessagesForGrouping = require('./compareMessagesForGrouping.js');
require('../../index-3448df64.js');
require('../../index-e8928da6.js');
require('../../utils-9193a195.js');
require('../../tslib.es6-c74b513f.js');
require('../../index-dbe8dd84.js');
require('../../utils/message/getOutgoingMessageState.js');
require('../../index-54279ec2.js');
require('@sendbird/chat/message');

/**
 * exported, should be backward compatible
 */
var getMessagePartsInfo = function (_a) {
  var _b = _a.allMessages,
    allMessages = _b === void 0 ? [] : _b,
    _c = _a.isMessageGroupingEnabled,
    isMessageGroupingEnabled = _c === void 0 ? true : _c,
    _d = _a.currentIndex,
    currentIndex = _d === void 0 ? 0 : _d,
    _e = _a.currentMessage,
    currentMessage = _e === void 0 ? null : _e,
    _f = _a.currentChannel,
    currentChannel = _f === void 0 ? null : _f,
    _g = _a.replyType,
    replyType = _g === void 0 ? '' : _g;
  var previousMessage = allMessages[currentIndex - 1];
  var nextMessage = allMessages[currentIndex + 1];
  var _h = isMessageGroupingEnabled ? Channel_utils_compareMessagesForGrouping.compareMessagesForGrouping(previousMessage, currentMessage, nextMessage, currentChannel, replyType) : [false, false],
    chainTop = _h[0],
    chainBottom = _h[1];
  var previousMessageCreatedAt = previousMessage === null || previousMessage === void 0 ? void 0 : previousMessage.createdAt;
  var currentCreatedAt = currentMessage.createdAt;
  // https://stackoverflow.com/a/41855608
  var hasSeparator = !(previousMessageCreatedAt && index.isSameDay(currentCreatedAt, previousMessageCreatedAt));
  return {
    chainTop: chainTop,
    chainBottom: chainBottom,
    hasSeparator: hasSeparator
  };
};

exports.getMessagePartsInfo = getMessagePartsInfo;
//# sourceMappingURL=getMessagePartsInfo.js.map
